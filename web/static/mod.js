var D=class l{static read_bytes(t,s){let o=new l;return o.buf=t.getUint32(s,!0),o.buf_len=t.getUint32(s+4,!0),o}static read_bytes_array(t,s,o){let u=[];for(let e=0;e<o;e++)u.push(l.read_bytes(t,s+8*e));return u}},L=class l{static read_bytes(t,s){let o=new l;return o.buf=t.getUint32(s,!0),o.buf_len=t.getUint32(s+4,!0),o}static read_bytes_array(t,s,o){let u=[];for(let e=0;e<o;e++)u.push(l.read_bytes(t,s+8*e));return u}},M=0,Z=1,B=2;var k=2;var z=4;var W=1;var x=class{write_bytes(t,s){t.setUint8(s,this.fs_filetype),t.setUint16(s+2,this.fs_flags,!0),t.setBigUint64(s+8,this.fs_rights_base,!0),t.setBigUint64(s+16,this.fs_rights_inherited,!0)}constructor(t,s){this.fs_rights_base=0n,this.fs_rights_inherited=0n,this.fs_filetype=t,this.fs_flags=s}};var H=8,C=class{write_bytes(t,s){t.setBigUint64(s,this.dev,!0),t.setBigUint64(s+8,this.ino,!0),t.setUint8(s+16,this.filetype),t.setBigUint64(s+24,this.nlink,!0),t.setBigUint64(s+32,this.size,!0),t.setBigUint64(s+38,this.atim,!0),t.setBigUint64(s+46,this.mtim,!0),t.setBigUint64(s+52,this.ctim,!0)}constructor(t,s,o){this.dev=0n,this.nlink=0n,this.atim=0n,this.mtim=0n,this.ctim=0n,this.ino=t,this.filetype=s,this.size=o}},q=0;var tt=1,P=class l{static read_bytes(t,s){return new l(t.getBigUint64(s,!0),t.getUint8(s+8),t.getUint32(s+16,!0),t.getBigUint64(s+24,!0),t.getUint16(s+36,!0))}constructor(t,s,o,u,e){this.userdata=t,this.eventtype=s,this.clockid=o,this.timeout=u,this.flags=e}},G=class{write_bytes(t,s){t.setBigUint64(s,this.userdata,!0),t.setUint16(s+8,this.error,!0),t.setUint8(s+10,this.eventtype)}constructor(t,s,o){this.userdata=t,this.error=s,this.eventtype=o}};var ot=class{enable(t){this.log=at(t===void 0?!0:t,this.prefix)}get enabled(){return this.isEnabled}constructor(t){this.isEnabled=t,this.prefix="wasi:",this.enable(t)}};function at(l,t){return l?console.log.bind(console,"%c%s","color: #265BA0",t):()=>{}}var S=new ot(!1);var U=class extends Error{constructor(t){super("exit with exit code "+t),this.code=t}},v=class{start(t){this.inst=t;try{return t.exports._start(),0}catch(s){if(s instanceof U)return s.code;throw s}}initialize(t){this.inst=t,t.exports._initialize&&t.exports._initialize()}constructor(t,s,o,u={}){this.args=[],this.env=[],this.fds=[],S.enable(u.debug),this.args=t,this.env=s,this.fds=o;let e=this;this.wasiImport={args_sizes_get(r,n){let i=new DataView(e.inst.exports.memory.buffer);i.setUint32(r,e.args.length,!0);let a=0;for(let _ of e.args)a+=_.length+1;return i.setUint32(n,a,!0),S.log(i.getUint32(r,!0),i.getUint32(n,!0)),0},args_get(r,n){let i=new DataView(e.inst.exports.memory.buffer),a=new Uint8Array(e.inst.exports.memory.buffer),_=n;for(let f=0;f<e.args.length;f++){i.setUint32(r,n,!0),r+=4;let d=new TextEncoder().encode(e.args[f]);a.set(d,n),i.setUint8(n+d.length,0),n+=d.length+1}return S.enabled&&S.log(new TextDecoder("utf-8").decode(a.slice(_,n))),0},environ_sizes_get(r,n){let i=new DataView(e.inst.exports.memory.buffer);i.setUint32(r,e.env.length,!0);let a=0;for(let _ of e.env)a+=new TextEncoder().encode(_).length+1;return i.setUint32(n,a,!0),S.log(i.getUint32(r,!0),i.getUint32(n,!0)),0},environ_get(r,n){let i=new DataView(e.inst.exports.memory.buffer),a=new Uint8Array(e.inst.exports.memory.buffer),_=n;for(let f=0;f<e.env.length;f++){i.setUint32(r,n,!0),r+=4;let d=new TextEncoder().encode(e.env[f]);a.set(d,n),i.setUint8(n+d.length,0),n+=d.length+1}return S.enabled&&S.log(new TextDecoder("utf-8").decode(a.slice(_,n))),0},clock_res_get(r,n){let i;switch(r){case 1:{i=5000n;break}case 0:{i=1000000n;break}default:return 52}return new DataView(e.inst.exports.memory.buffer).setBigUint64(n,i,!0),0},clock_time_get(r,n,i){let a=new DataView(e.inst.exports.memory.buffer);if(r===0)a.setBigUint64(i,BigInt(new Date().getTime())*1000000n,!0);else if(r==1){let _;try{_=BigInt(Math.round(performance.now()*1e6))}catch{_=0n}a.setBigUint64(i,_,!0)}else a.setBigUint64(i,0n,!0);return 0},fd_advise(r,n,i,a){return e.fds[r]!=null?0:8},fd_allocate(r,n,i){return e.fds[r]!=null?e.fds[r].fd_allocate(n,i):8},fd_close(r){if(e.fds[r]!=null){let n=e.fds[r].fd_close();return e.fds[r]=void 0,n}else return 8},fd_datasync(r){return e.fds[r]!=null?e.fds[r].fd_sync():8},fd_fdstat_get(r,n){if(e.fds[r]!=null){let{ret:i,fdstat:a}=e.fds[r].fd_fdstat_get();return a?.write_bytes(new DataView(e.inst.exports.memory.buffer),n),i}else return 8},fd_fdstat_set_flags(r,n){return e.fds[r]!=null?e.fds[r].fd_fdstat_set_flags(n):8},fd_fdstat_set_rights(r,n,i){return e.fds[r]!=null?e.fds[r].fd_fdstat_set_rights(n,i):8},fd_filestat_get(r,n){if(e.fds[r]!=null){let{ret:i,filestat:a}=e.fds[r].fd_filestat_get();return a?.write_bytes(new DataView(e.inst.exports.memory.buffer),n),i}else return 8},fd_filestat_set_size(r,n){return e.fds[r]!=null?e.fds[r].fd_filestat_set_size(n):8},fd_filestat_set_times(r,n,i,a){return e.fds[r]!=null?e.fds[r].fd_filestat_set_times(n,i,a):8},fd_pread(r,n,i,a,_){let f=new DataView(e.inst.exports.memory.buffer),d=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let c=D.read_bytes_array(f,n,i),E=0;for(let R of c){let{ret:w,data:h}=e.fds[r].fd_pread(R.buf_len,a);if(w!=0)return f.setUint32(_,E,!0),w;if(d.set(h,R.buf),E+=h.length,a+=BigInt(h.length),h.length!=R.buf_len)break}return f.setUint32(_,E,!0),0}else return 8},fd_prestat_get(r,n){let i=new DataView(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let{ret:a,prestat:_}=e.fds[r].fd_prestat_get();return _?.write_bytes(i,n),a}else return 8},fd_prestat_dir_name(r,n,i){if(e.fds[r]!=null){let{ret:a,prestat:_}=e.fds[r].fd_prestat_get();if(_==null)return a;let f=_.inner.pr_name;return new Uint8Array(e.inst.exports.memory.buffer).set(f.slice(0,i),n),f.byteLength>i?37:0}else return 8},fd_pwrite(r,n,i,a,_){let f=new DataView(e.inst.exports.memory.buffer),d=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let c=L.read_bytes_array(f,n,i),E=0;for(let R of c){let w=d.slice(R.buf,R.buf+R.buf_len),{ret:h,nwritten:m}=e.fds[r].fd_pwrite(w,a);if(h!=0)return f.setUint32(_,E,!0),h;if(E+=m,a+=BigInt(m),m!=w.byteLength)break}return f.setUint32(_,E,!0),0}else return 8},fd_read(r,n,i,a){let _=new DataView(e.inst.exports.memory.buffer),f=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let d=D.read_bytes_array(_,n,i),c=0;for(let E of d){let{ret:R,data:w}=e.fds[r].fd_read(E.buf_len);if(R!=0)return _.setUint32(a,c,!0),R;if(f.set(w,E.buf),c+=w.length,w.length!=E.buf_len)break}return _.setUint32(a,c,!0),0}else return 8},fd_readdir(r,n,i,a,_){let f=new DataView(e.inst.exports.memory.buffer),d=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let c=0;for(;;){let{ret:E,dirent:R}=e.fds[r].fd_readdir_single(a);if(E!=0)return f.setUint32(_,c,!0),E;if(R==null)break;if(i-c<R.head_length()){c=i;break}let w=new ArrayBuffer(R.head_length());if(R.write_head_bytes(new DataView(w),0),d.set(new Uint8Array(w).slice(0,Math.min(w.byteLength,i-c)),n),n+=R.head_length(),c+=R.head_length(),i-c<R.name_length()){c=i;break}R.write_name_bytes(d,n,i-c),n+=R.name_length(),c+=R.name_length(),a=R.d_next}return f.setUint32(_,c,!0),0}else return 8},fd_renumber(r,n){if(e.fds[r]!=null&&e.fds[n]!=null){let i=e.fds[n].fd_close();return i!=0?i:(e.fds[n]=e.fds[r],e.fds[r]=void 0,0)}else return 8},fd_seek(r,n,i,a){let _=new DataView(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let{ret:f,offset:d}=e.fds[r].fd_seek(n,i);return _.setBigInt64(a,d,!0),f}else return 8},fd_sync(r){return e.fds[r]!=null?e.fds[r].fd_sync():8},fd_tell(r,n){let i=new DataView(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let{ret:a,offset:_}=e.fds[r].fd_tell();return i.setBigUint64(n,_,!0),a}else return 8},fd_write(r,n,i,a){let _=new DataView(e.inst.exports.memory.buffer),f=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let d=L.read_bytes_array(_,n,i),c=0;for(let E of d){let R=f.slice(E.buf,E.buf+E.buf_len),{ret:w,nwritten:h}=e.fds[r].fd_write(R);if(w!=0)return _.setUint32(a,c,!0),w;if(c+=h,h!=R.byteLength)break}return _.setUint32(a,c,!0),0}else return 8},path_create_directory(r,n,i){let a=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let _=new TextDecoder("utf-8").decode(a.slice(n,n+i));return e.fds[r].path_create_directory(_)}else return 8},path_filestat_get(r,n,i,a,_){let f=new DataView(e.inst.exports.memory.buffer),d=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let c=new TextDecoder("utf-8").decode(d.slice(i,i+a)),{ret:E,filestat:R}=e.fds[r].path_filestat_get(n,c);return R?.write_bytes(f,_),E}else return 8},path_filestat_set_times(r,n,i,a,_,f,d){let c=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let E=new TextDecoder("utf-8").decode(c.slice(i,i+a));return e.fds[r].path_filestat_set_times(n,E,_,f,d)}else return 8},path_link(r,n,i,a,_,f,d){let c=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null&&e.fds[_]!=null){let E=new TextDecoder("utf-8").decode(c.slice(i,i+a)),R=new TextDecoder("utf-8").decode(c.slice(f,f+d)),{ret:w,inode_obj:h}=e.fds[r].path_lookup(E,n);return h==null?w:e.fds[_].path_link(R,h,!1)}else return 8},path_open(r,n,i,a,_,f,d,c,E){let R=new DataView(e.inst.exports.memory.buffer),w=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let h=new TextDecoder("utf-8").decode(w.slice(i,i+a));S.log(h);let{ret:m,fd_obj:st}=e.fds[r].path_open(n,h,_,f,d,c);if(m!=0)return m;e.fds.push(st);let it=e.fds.length-1;return R.setUint32(E,it,!0),0}else return 8},path_readlink(r,n,i,a,_,f){let d=new DataView(e.inst.exports.memory.buffer),c=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let E=new TextDecoder("utf-8").decode(c.slice(n,n+i));S.log(E);let{ret:R,data:w}=e.fds[r].path_readlink(E);if(w!=null){let h=new TextEncoder().encode(w);if(h.length>_)return d.setUint32(f,0,!0),8;c.set(h,a),d.setUint32(f,h.length,!0)}return R}else return 8},path_remove_directory(r,n,i){let a=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let _=new TextDecoder("utf-8").decode(a.slice(n,n+i));return e.fds[r].path_remove_directory(_)}else return 8},path_rename(r,n,i,a,_,f){let d=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null&&e.fds[a]!=null){let c=new TextDecoder("utf-8").decode(d.slice(n,n+i)),E=new TextDecoder("utf-8").decode(d.slice(_,_+f)),{ret:R,inode_obj:w}=e.fds[r].path_unlink(c);if(w==null)return R;if(R=e.fds[a].path_link(E,w,!0),R!=0&&e.fds[r].path_link(c,w,!0)!=0)throw"path_link should always return success when relinking an inode back to the original place";return R}else return 8},path_symlink(r,n,i,a,_){let f=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[i]!=null){let d=new TextDecoder("utf-8").decode(f.slice(r,r+n)),c=new TextDecoder("utf-8").decode(f.slice(a,a+_));return 58}else return 8},path_unlink_file(r,n,i){let a=new Uint8Array(e.inst.exports.memory.buffer);if(e.fds[r]!=null){let _=new TextDecoder("utf-8").decode(a.slice(n,n+i));return e.fds[r].path_unlink_file(_)}else return 8},poll_oneoff(r,n,i){if(i===0)return 28;if(i>1)return S.log("poll_oneoff: only a single subscription is supported"),58;let a=new DataView(e.inst.exports.memory.buffer),_=P.read_bytes(a,r),f=_.eventtype,d=_.clockid,c=_.timeout;if(f!==q)return S.log("poll_oneoff: only clock subscriptions are supported"),58;let E;if(d===1)E=()=>BigInt(Math.round(performance.now()*1e6));else if(d===0)E=()=>BigInt(new Date().getTime())*1000000n;else return 28;let R=(_.flags&tt)!==0?c:E()+c;for(;R>E(););return new G(_.userdata,0,f).write_bytes(a,n),0},proc_exit(r){throw new U(r)},proc_raise(r){throw"raised signal "+r},sched_yield(){},random_get(r,n){let i=new Uint8Array(e.inst.exports.memory.buffer).subarray(r,r+n);if("crypto"in globalThis&&(typeof SharedArrayBuffer>"u"||!(e.inst.exports.memory.buffer instanceof SharedArrayBuffer)))for(let a=0;a<n;a+=65536)crypto.getRandomValues(i.subarray(a,a+65536));else for(let a=0;a<n;a++)i[a]=Math.random()*256|0},sock_recv(r,n,i){throw"sockets not supported"},sock_send(r,n,i){throw"sockets not supported"},sock_shutdown(r,n){throw"sockets not supported"},sock_accept(r,n){throw"sockets not supported"}}}};var I=class{fd_allocate(t,s){return 58}fd_close(){return 0}fd_fdstat_get(){return{ret:58,fdstat:null}}fd_fdstat_set_flags(t){return 58}fd_fdstat_set_rights(t,s){return 58}fd_filestat_get(){return{ret:58,filestat:null}}fd_filestat_set_size(t){return 58}fd_filestat_set_times(t,s,o){return 58}fd_pread(t,s){return{ret:58,data:new Uint8Array}}fd_prestat_get(){return{ret:58,prestat:null}}fd_pwrite(t,s){return{ret:58,nwritten:0}}fd_read(t){return{ret:58,data:new Uint8Array}}fd_readdir_single(t){return{ret:58,dirent:null}}fd_seek(t,s){return{ret:58,offset:0n}}fd_sync(){return 0}fd_tell(){return{ret:58,offset:0n}}fd_write(t){return{ret:58,nwritten:0}}path_create_directory(t){return 58}path_filestat_get(t,s){return{ret:58,filestat:null}}path_filestat_set_times(t,s,o,u,e){return 58}path_link(t,s,o){return 58}path_unlink(t){return{ret:58,inode_obj:null}}path_lookup(t,s){return{ret:58,inode_obj:null}}path_open(t,s,o,u,e,r){return{ret:54,fd_obj:null}}path_readlink(t){return{ret:58,data:null}}path_remove_directory(t){return 58}path_rename(t,s,o){return 58}path_unlink_file(t){return 58}},T=class l{static issue_ino(){return l.next_ino++}static root_ino(){return 0n}constructor(){this.ino=l.issue_ino()}};T.next_ino=1n;var A=class extends I{fd_allocate(t,s){if(!(this.file.size>t+s)){let o=new Uint8Array(Number(t+s));o.set(this.file.data,0),this.file.data=o}return 0}fd_fdstat_get(){return{ret:0,fdstat:new x(z,0)}}fd_filestat_set_size(t){if(this.file.size>t)this.file.data=new Uint8Array(this.file.data.buffer.slice(0,Number(t)));else{let s=new Uint8Array(Number(t));s.set(this.file.data,0),this.file.data=s}return 0}fd_read(t){let s=this.file.data.slice(Number(this.file_pos),Number(this.file_pos+BigInt(t)));return this.file_pos+=BigInt(s.length),{ret:0,data:s}}fd_pread(t,s){return{ret:0,data:this.file.data.slice(Number(s),Number(s+BigInt(t)))}}fd_seek(t,s){let o;switch(s){case M:o=t;break;case Z:o=this.file_pos+t;break;case B:o=BigInt(this.file.data.byteLength)+t;break;default:return{ret:28,offset:0n}}return o<0?{ret:28,offset:0n}:(this.file_pos=o,{ret:0,offset:this.file_pos})}fd_tell(){return{ret:0,offset:this.file_pos}}fd_write(t){if(this.file.readonly)return{ret:8,nwritten:0};if(this.file_pos+BigInt(t.byteLength)>this.file.size){let s=this.file.data;this.file.data=new Uint8Array(Number(this.file_pos+BigInt(t.byteLength))),this.file.data.set(s)}return this.file.data.set(t,Number(this.file_pos)),this.file_pos+=BigInt(t.byteLength),{ret:0,nwritten:t.byteLength}}fd_pwrite(t,s){if(this.file.readonly)return{ret:8,nwritten:0};if(s+BigInt(t.byteLength)>this.file.size){let o=this.file.data;this.file.data=new Uint8Array(Number(s+BigInt(t.byteLength))),this.file.data.set(o)}return this.file.data.set(t,Number(s)),{ret:0,nwritten:t.byteLength}}fd_filestat_get(){return{ret:0,filestat:this.file.stat()}}constructor(t){super(),this.file_pos=0n,this.file=t}};var F=class extends T{path_open(t,s,o){if(this.readonly&&(s&BigInt(64))==BigInt(64))return{ret:63,fd_obj:null};if((t&H)==H){if(this.readonly)return{ret:63,fd_obj:null};this.data=new Uint8Array([])}let u=new A(this);return o&W&&u.fd_seek(0n,B),{ret:0,fd_obj:u}}get size(){return BigInt(this.data.byteLength)}stat(){return new C(this.ino,z,this.size)}constructor(t,s){super(),this.data=new Uint8Array(t),this.readonly=!!s?.readonly}};var y=class l extends I{fd_filestat_get(){return{ret:0,filestat:new C(this.ino,k,BigInt(0))}}fd_fdstat_get(){let t=new x(k,0);return t.fs_rights_base=BigInt(64),{ret:0,fdstat:t}}fd_write(t){return this.write(t),{ret:0,nwritten:t.byteLength}}static lineBuffered(t){let s=new TextDecoder("utf-8",{fatal:!1}),o="";return new l(u=>{o+=s.decode(u,{stream:!0});let e=o.split(`
`);for(let[r,n]of e.entries())r<e.length-1?t(n):o=n})}constructor(t){super(),this.ino=T.issue_ino(),this.write=t}};var J=class{#e=0;#t=new Map;newJSVal(t){let s=++this.#e;return this.#t.set(s,t),s}getJSVal(t){if(!this.#t.has(t))throw new WebAssembly.RuntimeError(`getJSVal(${t})`);return this.#t.get(t)}freeJSVal(t){if(!this.#t.delete(t))throw new WebAssembly.RuntimeError(`freeJSVal(${t})`)}},lt=await(async()=>{if(globalThis.setImmediate)return globalThis.setImmediate;if(globalThis.Deno)try{return(await import("node:timers")).setImmediate}catch{}if(globalThis.scheduler)return(l,...t)=>scheduler.postTask(()=>l(...t));if(globalThis.MessageChannel){class l{#e=[];#t=new MessageChannel;constructor(){this.#t.port1.addEventListener("message",()=>{this.#e.pop()()}),this.#t.port1.start()}setImmediate(o,...u){this.#e.push(()=>o(...u)),this.#t.port2.postMessage(void 0)}}let t=new l;return(s,...o)=>t.setImmediate(s,...o)}return(l,...t)=>setTimeout(l,0,...t)})(),rt=l=>{let t=new J,s=globalThis.FinalizationRegistry?new FinalizationRegistry(o=>l.rts_freeStablePtr(o)):{register:()=>{},unregister:()=>!0};return{newJSVal:o=>t.newJSVal(o),getJSVal:o=>t.getJSVal(o),freeJSVal:o=>t.freeJSVal(o),scheduleWork:()=>lt(l.rts_schedulerLoop),ZC4ZCimplizm3zi0zi0zi0zminplacezmimplizmwasmZCMainZC:o=>console.log(o),ZC0ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:(o,u)=>o.reject(new WebAssembly.RuntimeError(u)),ZC2ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:(o,u)=>o.resolve(u),ZC18ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:(o,u)=>o.resolve(u),ZC19ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:o=>o.resolve(),ZC20ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:o=>{o.throwTo=()=>{}},ZC21ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:(o,u)=>{o.throwTo=e=>l.rts_promiseThrowTo(u,e)},ZC22ZCghczminternalZCGHCziInternalziWasmziPrimziExportsZC:()=>{let o,u,e=new Promise((r,n)=>{o=r,u=n});return e.resolve=o,e.reject=u,e},ZC0ZCghczminternalZCGHCziInternalziWasmziPrimziTypesZC:o=>`${o.stack?o.stack:o}`,ZC1ZCghczminternalZCGHCziInternalziWasmziPrimziTypesZC:(o,u)=>new TextDecoder("utf-8",{fatal:!0}).decode(new Uint8Array(l.memory.buffer,o,u)),ZC2ZCghczminternalZCGHCziInternalziWasmziPrimziTypesZC:(o,u,e)=>new TextEncoder().encodeInto(o,new Uint8Array(l.memory.buffer,u,e)).written,ZC3ZCghczminternalZCGHCziInternalziWasmziPrimziTypesZC:o=>o.length,ZC4ZCghczminternalZCGHCziInternalziWasmziPrimziTypesZC:o=>{try{s.unregister(o)}catch{}},ZC18ZCghczminternalZCGHCziInternalziWasmziPrimziImportsZC:(o,u)=>o.then(()=>l.rts_promiseResolveUnit(u),e=>l.rts_promiseReject(u,e)),ZC0ZCghczminternalZCGHCziInternalziWasmziPrimziConcziInternalZC:async o=>new Promise(u=>setTimeout(u,o/1e3))}};var V=class{constructor(){}async initialize(){this.exports={};let t=[new A(new F([])),y.lineBuffered(u=>console.log(`[WASI stdout] ${u}`)),y.lineBuffered(u=>console.warn(`[WASI stderr] ${u}`))],s=new v([],[],t),o=await WebAssembly.instantiateStreaming(fetch("./impli.wasm"),{wasi_snapshot_preview1:s.wasiImport,ghc_wasm_jsffi:rt(this.exports)});return s.initialize(o.instance),Object.assign(this.exports,o.instance.exports),this.pointer=this.exports.initialize(),this}async interpret(t){let s=await this.exports.execute(this.pointer,t);return JSON.parse(s)}};var Q=document.getElementById("terminal"),$=document.getElementById("input");function nt(l){Q.textContent+=l+`
`,Q.scrollTop=Q.scrollHeight}async function ut(){nt("Hello, World!");let l=await new V().initialize();$.addEventListener("keypress",async t=>{if(t.key==="Enter"){let s=$.value;nt("> "+s),$.value="",await l.interpret(s)}})}ut();
