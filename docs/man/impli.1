.TH IMPLI 1 "January 2026" "impli 4.0" "User Commands"
.SH NAME
impli \- Interpreter and REPL for the imperative toy language IMP
.SH SYNOPSIS
.B impli
[\fB--history\fR \fIFILE\fR] [\fB--config\fR \fIFILE\fR]
.br
.B impli
[\fIFILE\fR]
.br
.B impli
[\fB-c\fR|\fB--command\fR \fICOMMAND\fR]
.br
.B impli
[\fB-a\fR|\fB--ast\fR \fICONSTRUCT\fR]
.br
.B impli
[\fB--stdin\fR]
.br
.B impli
[\fB--version\fR]
.br
.B impli
[\fB-h\fR|\fB--help\fR]
.SH DESCRIPTION
.B impli
is an interpreter and interactive REPL for the imperative toy language IMP. It supports evaluating IMP source files, executing commands, printing abstract syntax trees, and more.
.SH MODES OF OPERATION
.TP
.B No arguments
Start the interactive REPL.
.TP
.BR --history " " FILE
Save REPL history to the specified file.
.TP
.BR --config " " FILE
Read Haskeline configuration from the specified file.
.TP
.B FILE
Interpret the specified IMP source file.
.TP
.BR -c ", " --command " " COMMAND
Interpret the given IMP command string.
.TP
.BR -a ", " --ast " " CONSTRUCT
Parse and print the abstract syntax tree (AST) of the given construct.
.TP
.B --stdin
Interpret IMP program from standard input.
.TP
.B --version
Print the version of the impli interpreter.
.TP
.BR -h ", " --help
Show this help text.

.SH REPL META COMMANDS
Within the REPL, the following meta commands are available (all can be abbreviated by their first letter):
.TP
.B :help , :?
Show help for meta commands.
.TP
.B :quit
Exit the REPL.
.TP
.B :clear
Clear the screen.
.TP
.B :reset [ASPECT]
Reset the environment or one specific aspect of it (vars, procs, break, trace). If no aspect is given, all are reset.
.TP
.B :show [ASPECT]
Show the current state of the interpreter or one specific aspect of it (vars, procs, break, trace). If no aspect is given, all are shown.
.TP
.B :load FILE
Interpret and load a source file into the current state.
.TP
.B :write FILE
Write the current trace to a file.
.TP
.B :ast (INPUT | #n)
Parse and display the AST of the given input or the n-th statement in the trace.
.TP
.B :set OPTION VALUE
Set a REPL option. Supported options are
.IR welcome ,
.IR prompt ,
.IR separator
(must be one of: :?!\-+\*#%&$=>),
.IR goodbye ,
and
.IR verbose .
.TP
.B :unset OPTION
Reset a REPL option to its default value.

.SH EXIT STATUS
Returns 0 on success, non-zero on error.

.SH EXAMPLES
.TP
Start the REPL:
.B impli
.TP
Interpret a file:
.B impli example.imp
.TP
Interpret a command:
.B impli -c \(dqx := 42\(dq
.TP
Print the AST of a construct:
.B impli -a \(dqif true then skip else skip end\(dq
.TP
Interpret from standard input:
.B impli --stdin


.SH AUTHOR
Basil Feitknecht <bfeitknecht@ethz.ch>

.SH SEE ALSO
.BR ghci (1),
.BR man (1)
